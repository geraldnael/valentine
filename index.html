<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>For My Favorite Person ‚ù§Ô∏è</title>

<style>
:root{
    --pink:#ff4d6d;
    --dark:#c9184a;
    --soft:#fff0f3;
}

body{
    margin:0;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:var(--soft);
    font-family:Georgia,serif;
    text-align:center;
    transition:background 1s;
}

/* CARD */
.card{
    background:white;
    padding:30px;
    border-radius:28px;
    box-shadow:0 20px 45px rgba(255,77,109,.25);
    width:90%;
    max-width:420px;
}

/* HEARTBEAT */
@keyframes heartbeat{
    0%{transform:scale(1)}
    25%{transform:scale(1.03)}
    40%{transform:scale(1)}
    60%{transform:scale(1.03)}
    100%{transform:scale(1)}
}
.heartbeat{
    animation:heartbeat 2.5s infinite;
}

button{
    padding:12px 25px;
    border:none;
    border-radius:30px;
    background:var(--pink);
    color:white;
    font-weight:bold;
    cursor:pointer;
}
button:hover{background:var(--dark)}

input{
    padding:12px;
    width:75%;
    border-radius:15px;
    border:2px solid #ffb3c1;
    text-align:center;
    font-size:18px;
}

#mainContent{display:none}

/* ===== KEYPAD ===== */
.keypad{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:10px;
    margin-top:15px;
}
.keypad button{
    padding:16px;
    font-size:20px;
    border-radius:16px;
    background:#ffb3c1;
    color:#7a0026;
}

/* ===== GAME ===== */
#board{
    display:grid;
    grid-template-columns:repeat(6,1fr);
    gap:8px;
    max-width:300px;
    margin:20px auto;
}
.tile{
    width:45px;
    height:45px;
    border-radius:12px;
    font-size:24px;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#ffb3c1;
    cursor:pointer;
    transition:.25s;
}
.tile.selected{
    outline:3px solid white;
    transform:scale(1.15);
}
.tile.pop{
    animation:pop .3s forwards;
}
@keyframes pop{
    0%{transform:scale(1)}
    50%{transform:scale(1.4)}
    100%{transform:scale(0);opacity:0}
}

/* ===== FADE IN QUESTION ===== */
.fade-in-question{
    opacity:0;
    transform:translateY(15px);
    animation:fadeInUp 1.2s ease forwards;
}

@keyframes fadeInUp{
    to{
        opacity:1;
        transform:translateY(0);
    }
}


/* ===== LETTER ===== */
#questionArea,.letter{display:none}
.letter{
    background:#fffcf2;
    padding:25px;
    border-left:10px solid var(--pink);
    text-align:left;
    position: relative;
}

.letter{
    opacity:0;
    transform:translateY(20px);
    animation:letterReveal 1.5s ease forwards;
}

@keyframes letterReveal{
    to{
        opacity:1;
        transform:translateY(0);
    }
}



/* ===== SLIDER ===== */
.slider{position:relative;margin:15px 0;overflow:hidden;border-radius:18px}
.slides{height:220px}
.slide{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    object-fit:cover;
    opacity:0;
    transition:.6s;
}
.slide.active{opacity:1}
.nav{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    background:white;
    border:none;
    border-radius:50%;
    width:34px;
    height:34px;
}
.prev{left:10px}
.next{right:10px}

/* ===== MOBILE ===== */
@media(max-width:480px){
    .card{padding:20px}
    .tile{width:40px;height:40px;font-size:22px}
    input{font-size:20px;width:85%}
    .keypad button{padding:18px;font-size:22px}
}
</style>
</head>

<body>

<audio id="bgm" loop>
    <source src="audio/romantic.mp3" type="audio/mpeg">
</audio>

<!-- LOCK -->
<div class="card" id="lockScreen">
    <h2 style="color:var(--pink)">üíñ Our Secret Memory</h2>
    <p>Masukkan tanggal jadian kita</p>
    <input id="passInput" readonly placeholder="DDMMYY">

    <div class="keypad">
        <button onclick="press(1)">1</button>
        <button onclick="press(2)">2</button>
        <button onclick="press(3)">3</button>
        <button onclick="press(4)">4</button>
        <button onclick="press(5)">5</button>
        <button onclick="press(6)">6</button>
        <button onclick="press(7)">7</button>
        <button onclick="press(8)">8</button>
        <button onclick="press(9)">9</button>
        <button onclick="clearPass()">‚å´</button>
        <button onclick="press(0)">0</button>
        <button onclick="unlock()">‚úî</button>
    </div>
</div>

<!-- MAIN -->
<div class="card" id="mainContent">

    <div id="gameArea">
        <h2 style="color:var(--pink)">Match the Hearts üíï</h2>
        <div id="board"></div>
        <p id="status">Love Score: 0 / 5</p>
    </div>

    <div id="questionArea">
        <h2 class="fade-in-question" style="color:var(--pink)">
            Will you be my Valentine? üåπ
        </h2>
        <button onclick="showLetter()">Yes ‚ù§Ô∏è</button>
        <button id="noBtn" onclick="moveNo()">No</button>
    </div>

    <div class="letter" id="finalLetter">
        <h3 style="color:var(--pink);text-align:center">Dear My Loveee</h3>

        <div class="slider">
            <button class="nav prev" onclick="prevSlide()">‚ùÆ</button>
            <div class="slides">
                <img src="img/img1.jpeg" class="slide active">
                <img src="img/img2.jpeg" class="slide">
                <img src="img/img3.jpeg" class="slide">
                <img src="img/img4.jpeg" class="slide">
                <img src="img/img5.jpeg" class="slide">
                <img src="img/img6.jpeg" class="slide">
                <img src="img/img7.jpeg" class="slide">
                <img src="img/img8.jpeg" class="slide">
                <img src="img/img9.jpeg" class="slide">
                <img src="img/img10.jpeg" class="slide">
                <img src="img/img11.jpeg" class="slide">
                <img src="img/img12.jpeg" class="slide">
                <img src="img/img13.jpeg" class="slide">
                <img src="img/img14.jpeg" class="slide">
                <img src="img/img15.jpeg" class="slide">
                <img src="img/img16.jpeg" class="slide">
                <img src="img/img17.jpeg" class="slide">
                <img src="img/img18.jpeg" class="slide">
                <img src="img/img19.jpeg" class="slide">
                <img src="img/img20.jpeg" class="slide">
                <img src="img/img21.jpeg" class="slide">
                <img src="img/img22.jpeg" class="slide">
                <img src="img/img23.jpeg" class="slide">
                
            </div>
        </div>

        <p>Happy Valentine‚Äôs Day Sayang ü§ç</p>
        <p>You are the beginning and the end of my thoughts. You are the reason why I smile everyday, why I feel alive and hopeful, why I cherish every moment we share.</p>
        <p>You are my best friend, my partner, my soulmate. You have given me so much love and happiness, and I can never thank you enough for that.</p>
        <p>You are the most beautiful person I have ever known, inside and out. You make me want to be a better person, to grow with you, to support you, to cherish you.</p>
        <p>You are my valentine, today and always.</p>

        <p style="text-align:right;font-weight:bold;color:var(--pink)">
            ‚Äî I love you with all my heart ‚ú®
        </p>
    </div>

</div>

<script>
/* ===== DOM ===== */
const passInput=document.getElementById('passInput');
const lockScreen=document.getElementById('lockScreen');
const mainContent=document.getElementById('mainContent');
const boardDiv=document.getElementById('board');
const status=document.getElementById('status');
const gameArea=document.getElementById('gameArea');
const questionArea=document.getElementById('questionArea');
const finalLetter=document.getElementById('finalLetter');
const noBtn=document.getElementById('noBtn');
const bgm=document.getElementById('bgm');


/* ===== KEYPAD ===== */
function press(n){
    if(passInput.value.length<6){
        passInput.value+=n;
        navigator.vibrate?.(30);
        if(passInput.value.length===6) unlock();
    }
}
function clearPass(){
    passInput.value=passInput.value.slice(0,-1);
}

/* ===== UNLOCK ===== */
const PASSWORD = "170126"; // DDMMYY

function unlock(){
    if(passInput.value === PASSWORD){
        bgm.volume = 0.4;
        bgm.play();
        lockScreen.style.display = 'none';
        mainContent.style.display = 'block';
        mainContent.classList.add('heartbeat');
        initBoard();
    }else{
        passInput.value = '';
        alert('Salah üòù');
    }
}


/* ===== GAME ===== */
const size=6;
const symbols=['‚ù§Ô∏è','üíó','üíñ','üíò'];
let board=[],selected=null,score=0;

function initBoard(){
    score=0;
    status.innerText='Love Score: 0 / 5';
    board=[...Array(size*size)].map(()=>symbols[rand()]);
    draw();
}

function draw(){
    boardDiv.innerHTML='';
    board.forEach((v,i)=>{
        const d=document.createElement('div');
        d.className='tile';
        d.innerText=v;
        d.onclick=()=>select(i,d);
        boardDiv.appendChild(d);
    });
}

function select(i,el){
    if(selected===null){
        selected=i;el.classList.add('selected');
    }else{
        [board[selected],board[i]]=[board[i],board[selected]];
        selected=null;draw();setTimeout(resolveMatches,200);
    }
}

function resolveMatches(){
    const m=findMatches();
    if(m.length){
        m.forEach(i=>boardDiv.children[i].classList.add('pop'));
        setTimeout(()=>{
            m.forEach(i=>board[i]=null);
            score++;status.innerText=`Love Score: ${score} / 5`;
            gravity();refill();draw();
            if(score>=5){
                gameArea.style.display='none';
                questionArea.style.display='block';
            }else setTimeout(resolveMatches,300);
        },300);
    }
}

function findMatches(){
    let m=[];
    for(let r=0;r<size;r++)
        for(let c=0;c<size-2;c++){
            let i=r*size+c;
            if(board[i]&&board[i]==board[i+1]&&board[i]==board[i+2])
                m.push(i,i+1,i+2);
        }
    for(let c=0;c<size;c++)
        for(let r=0;r<size-2;r++){
            let i=r*size+c;
            if(board[i]&&board[i]==board[i+size]&&board[i]==board[i+2*size])
                m.push(i,i+size,i+2*size);
        }
    return [...new Set(m)];
}

function gravity(){
    for(let c=0;c<size;c++){
        let col=[];
        for(let r=0;r<size;r++){
            let i=r*size+c;
            if(board[i]) col.push(board[i]);
        }
        while(col.length<size) col.unshift(null);
        for(let r=0;r<size;r++) board[r*size+c]=col[r];
    }
}
function refill(){board=board.map(v=>v??symbols[rand()])}
function rand(){return Math.floor(Math.random()*symbols.length)}

/* ===== QUESTION ===== */
function moveNo(){
    const btnWidth = noBtn.offsetWidth;
    const btnHeight = noBtn.offsetHeight;

    const maxX = window.innerWidth - btnWidth - 10;
    const maxY = window.innerHeight - btnHeight - 10;

    noBtn.style.position = 'absolute';
    noBtn.style.left = Math.random() * 60 + '%';
    noBtn.style.top  = Math.random() * 60 + '%';

}

function showLetter(){
    questionArea.style.display = 'none';
    finalLetter.style.display = 'block';
    document.body.style.background = '#ffc2d1';
    startAutoSlide();
}



/* ===== SLIDER ===== */
let slideIndex = 0;
let autoSlideInterval = null;
const SLIDE_DELAY = 3000; // 3 detik

function slides(){
    return document.querySelectorAll('.slide');
}

function showSlide(i){
    slides().forEach(s => s.classList.remove('active'));
    slides()[i].classList.add('active');
}

function nextSlide(){
    slideIndex = (slideIndex + 1) % slides().length;
    showSlide(slideIndex);
    resetAutoSlide();
}

function prevSlide(){
    slideIndex = (slideIndex - 1 + slides().length) % slides().length;
    showSlide(slideIndex);
    resetAutoSlide();
}

function startAutoSlide(){
    autoSlideInterval = setInterval(() => {
        slideIndex = (slideIndex + 1) % slides().length;
        showSlide(slideIndex);
    }, SLIDE_DELAY);
}

function resetAutoSlide(){
    clearInterval(autoSlideInterval);
    startAutoSlide();
}

</script>

</body>
</html>
